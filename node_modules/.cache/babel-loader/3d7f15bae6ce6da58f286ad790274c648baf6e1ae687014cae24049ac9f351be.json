{"ast":null,"code":"import React,{useEffect,useContext,useState}from'react';import{Container,Row,Col,Card,Button,Pagination,Modal}from'react-bootstrap';import{fetchNews}from'../http/newsAPI';import{Context}from'../index';import{observer}from'mobx-react-lite';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NewsCards=observer(()=>{const{news}=useContext(Context);const[selectedNews,setSelectedNews]=useState(null);const[showModal,setShowModal]=useState(false);useEffect(()=>{fetchNews(news.page,news.limit).then(data=>{news.setNovelty(data.rows);news.setTotalCount(data.count);});},[news.page,news.limit]);const totalPages=Math.ceil(news.totalCount/news.limit);const handlePageChange=pageNumber=>{news.setPage(pageNumber);};const handleNewsClick=news=>{setSelectedNews(news);setShowModal(true);};const handleCloseModal=()=>{setShowModal(false);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Container,{className:\"block-Standart\",children:/*#__PURE__*/_jsx(Row,{xs:1,md:1,className:\"mt-5\",style:{width:'100vw'},children:news.novelty.map((newsItem,index)=>/*#__PURE__*/_jsx(Col,{className:\"col-lg-4 g-5\",children:/*#__PURE__*/_jsxs(Card,{className:\"card-News\",style:{backgroundColor:'#F4F5F6',border:'none',position:'relative'},children:[/*#__PURE__*/_jsx(Card.Img,{variant:\"top\",className:\"card-img-news-top\",src:process.env.REACT_APP_API_URL+newsItem.image,style:{marginBottom:'-10px'}}),/*#__PURE__*/_jsxs(Card.Body,{style:{display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(Card.Title,{className:\"body-Regular-Gradient\",style:{textAlign:'center',marginBottom:'4px'},children:newsItem.date}),/*#__PURE__*/_jsx(Card.Title,{className:\"caption-Gradient\",style:{textAlign:'center'},children:newsItem.name}),/*#__PURE__*/_jsx(Card.Text,{className:\"body-Small-Text\",children:newsItem.text}),/*#__PURE__*/_jsx(Button,{className:\"button-3 mt-auto\",style:{border:'none',alignSelf:'center'},onClick:()=>handleNewsClick(newsItem),children:\"\\u041F\\u043E\\u0434\\u0440\\u043E\\u0431\\u043D\\u0435\\u0435\"})]})]})},index))})}),/*#__PURE__*/_jsxs(Pagination,{className:\"mt-5 block-Standart\",children:[/*#__PURE__*/_jsx(Pagination.Prev,{style:{transform:'translateX(85px)'},disabled:news.page===1,onClick:()=>handlePageChange(news.page-1)}),/*#__PURE__*/_jsx(Pagination.Next,{style:{transform:'translateX(85px)'},disabled:news.page===totalPages,onClick:()=>handlePageChange(news.page+1)}),/*#__PURE__*/_jsx(\"div\",{className:\"div-more-news\",children:/*#__PURE__*/_jsx(Button,{className:\"button-3\",style:{border:'none'},children:\"\\u0411\\u043E\\u043B\\u044C\\u0448\\u0435 \\u043D\\u043E\\u0432\\u043E\\u0441\\u0442\\u0435\\u0439\"})})]}),/*#__PURE__*/_jsxs(Modal,{show:showModal,onHide:handleCloseModal,children:[/*#__PURE__*/_jsx(\"img\",{src:process.env.REACT_APP_API_URL+(selectedNews===null||selectedNews===void 0?void 0:selectedNews.image),alt:\"\\u041D\\u043E\\u0432\\u043E\\u0441\\u0442\\u044C\",style:{objectFit:'cover'}}),/*#__PURE__*/_jsx(Modal.Header,{children:/*#__PURE__*/_jsx(Modal.Title,{className:\"title-Text-2\",children:selectedNews===null||selectedNews===void 0?void 0:selectedNews.name})}),/*#__PURE__*/_jsx(Modal.Body,{className:\"body-Regular\",style:{color:'rgb(61, 147, 120)'},children:/*#__PURE__*/_jsx(\"p\",{children:selectedNews===null||selectedNews===void 0?void 0:selectedNews.fulltext})}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{className:\"button-3\",onClick:handleCloseModal,style:{border:'none'},children:\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\"})})]})]});});export default NewsCards;","map":{"version":3,"names":["React","useEffect","useContext","useState","Container","Row","Col","Card","Button","Pagination","Modal","fetchNews","Context","observer","jsx","_jsx","jsxs","_jsxs","NewsCards","news","selectedNews","setSelectedNews","showModal","setShowModal","page","limit","then","data","setNovelty","rows","setTotalCount","count","totalPages","Math","ceil","totalCount","handlePageChange","pageNumber","setPage","handleNewsClick","handleCloseModal","children","className","xs","md","style","width","novelty","map","newsItem","index","backgroundColor","border","position","Img","variant","src","process","env","REACT_APP_API_URL","image","marginBottom","Body","display","flexDirection","Title","textAlign","date","name","Text","text","alignSelf","onClick","Prev","transform","disabled","Next","show","onHide","alt","objectFit","Header","color","fulltext","Footer"],"sources":["D:/Psych-narc/client/src/components/NewsCards.js"],"sourcesContent":["import React, { useEffect, useContext, useState } from 'react';\r\nimport { Container, Row, Col, Card, Button, Pagination, Modal } from 'react-bootstrap';\r\nimport { fetchNews } from '../http/newsAPI';\r\nimport { Context } from '../index';\r\nimport { observer } from 'mobx-react-lite';\r\n\r\nconst NewsCards = observer(() => {\r\n  const { news } = useContext(Context);\r\n  const [selectedNews, setSelectedNews] = useState(null);\r\n  const [showModal, setShowModal] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchNews(news.page, news.limit).then(data => {\r\n      news.setNovelty(data.rows);\r\n      news.setTotalCount(data.count);\r\n    });\r\n  }, [news.page, news.limit]);\r\n\r\n  const totalPages = Math.ceil(news.totalCount / news.limit);\r\n\r\n  const handlePageChange = (pageNumber) => {\r\n    news.setPage(pageNumber);\r\n  };\r\n\r\n  const handleNewsClick = (news) => {\r\n    setSelectedNews(news);\r\n    setShowModal(true);\r\n  };\r\n\r\n  const handleCloseModal = () => {\r\n    setShowModal(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Container className='block-Standart'>\r\n        <Row xs={1} md={1} className=\"mt-5\" style={{width:'100vw'}}>\r\n          {news.novelty.map((newsItem, index) => (\r\n            <Col key={index} className='col-lg-4 g-5'>\r\n              <Card className='card-News' style={{ backgroundColor: '#F4F5F6', border: 'none', position:'relative' }}>\r\n                <Card.Img \r\n                  variant=\"top\" \r\n                  className='card-img-news-top' \r\n                  src={process.env.REACT_APP_API_URL + newsItem.image} \r\n                  style={{ marginBottom: '-10px' }} />\r\n                <Card.Body style={{display:'flex', flexDirection:'column'}}>\r\n                  <Card.Title className='body-Regular-Gradient' style={{ textAlign: 'center', marginBottom: '4px' }}>\r\n                    {newsItem.date}\r\n                  </Card.Title>\r\n                  <Card.Title className='caption-Gradient' style={{ textAlign: 'center' }}>\r\n                    {newsItem.name}\r\n                  </Card.Title>\r\n                  <Card.Text className='body-Small-Text'>\r\n                    {newsItem.text}\r\n                  </Card.Text>\r\n                    <Button \r\n                      className='button-3 mt-auto' \r\n                      style={{ border: 'none', alignSelf:'center'}} \r\n                      onClick={() => handleNewsClick(newsItem)}>\r\n                        Подробнее\r\n                    </Button>\r\n                </Card.Body>\r\n              </Card>\r\n            </Col>\r\n          ))}\r\n        </Row>\r\n      </Container>\r\n      <Pagination className='mt-5 block-Standart'>\r\n        <Pagination.Prev \r\n          style={{ transform: 'translateX(85px)' }} \r\n          disabled={news.page === 1} \r\n          onClick={() => handlePageChange(news.page - 1)} />\r\n        <Pagination.Next \r\n          style={{ transform: 'translateX(85px)' }} \r\n          disabled={news.page === totalPages} \r\n          onClick={() => handlePageChange(news.page + 1)} />\r\n        <div className='div-more-news'>\r\n          <Button className='button-3' style={{ border: 'none' }}>\r\n            Больше новостей\r\n          </Button>\r\n        </div>\r\n      </Pagination>\r\n      <Modal show={showModal} onHide={handleCloseModal}> \r\n        <img \r\n          src={process.env.REACT_APP_API_URL + selectedNews?.image}\r\n          alt='Новость'\r\n          style={{objectFit:'cover'}}/>\r\n        <Modal.Header>\r\n          <Modal.Title className='title-Text-2'>{selectedNews?.name}</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className='body-Regular' style={{color:'rgb(61, 147, 120)'}}>\r\n          <p>{selectedNews?.fulltext}</p>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button className='button-3' onClick={handleCloseModal} style={{border:'none'}}>\r\n            Закрыть\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default NewsCards;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}