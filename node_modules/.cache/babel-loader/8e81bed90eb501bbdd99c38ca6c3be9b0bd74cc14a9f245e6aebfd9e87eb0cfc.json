{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Modal,Button,Form}from'react-bootstrap';import{updateNews}from'../../http/newsAPI';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EditNewsModal=_ref=>{let{show,onHide,news}=_ref;const[name,setName]=useState(news?news.name:'');const[text,setText]=useState(news?news.text:'');const[date,setDate]=useState(news?news.date:'');const[image,setImage]=useState(null);useEffect(()=>{setName(news?news.name:'');setText(news?news.text:'');setDate(news?news.date:'');setImage(null);},[news]);const handleSubmit=async()=>{const formData=new FormData();formData.append('name',name);formData.append('text',text);formData.append('date',date);if(image){formData.append('image',image);}await updateNews(news.id,formData);onHide();};const handleImageChange=e=>{setImage(e.target.files[0]);};return/*#__PURE__*/_jsxs(Modal,{show:show,onHide:onHide,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043D\\u043E\\u0432\\u043E\\u0441\\u0442\\u044C\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:name,onChange:e=>setName(e.target.value)})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u0422\\u0435\\u043A\\u0441\\u0442\"}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",rows:3,value:text,onChange:e=>setText(e.target.value)})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u0414\\u0430\\u0442\\u0430\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"date\",value:date,onChange:e=>setDate(e.target.value)})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\u0418\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"file\",onChange:handleImageChange})]})]})}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:onHide,children:\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleSubmit,children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"})]})]});};export default EditNewsModal;","map":{"version":3,"names":["React","useState","useEffect","Modal","Button","Form","updateNews","jsx","_jsx","jsxs","_jsxs","EditNewsModal","_ref","show","onHide","news","name","setName","text","setText","date","setDate","image","setImage","handleSubmit","formData","FormData","append","id","handleImageChange","e","target","files","children","Header","closeButton","Title","Body","Group","Label","Control","type","value","onChange","as","rows","Footer","variant","onClick"],"sources":["D:/Psych-narc/client/src/components/modals/EditNewsModal.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Modal, Button, Form } from 'react-bootstrap';\r\nimport { updateNews } from '../../http/newsAPI';\r\n\r\nconst EditNewsModal = ({ show, onHide, news }) => {\r\n  const [name, setName] = useState(news ? news.name : '');\r\n  const [text, setText] = useState(news ? news.text : '');\r\n  const [date, setDate] = useState(news ? news.date : '');\r\n  const [image, setImage] = useState(null);\r\n\r\n  useEffect(() => {\r\n    setName(news ? news.name : '');\r\n    setText(news ? news.text : '');\r\n    setDate(news ? news.date : '');\r\n    setImage(null);\r\n  }, [news]);\r\n\r\n  const handleSubmit = async () => {\r\n    const formData = new FormData();\r\n    formData.append('name', name);\r\n    formData.append('text', text);\r\n    formData.append('date', date);\r\n    if (image) {\r\n      formData.append('image', image);\r\n    }\r\n    await updateNews(news.id, formData);\r\n    onHide();\r\n  };\r\n\r\n  const handleImageChange = (e) => {\r\n    setImage(e.target.files[0]);\r\n  };\r\n\r\n  return (\r\n    <Modal show={show} onHide={onHide}>\r\n      <Modal.Header closeButton>\r\n        <Modal.Title>Редактировать новость</Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <Form>\r\n          <Form.Group>\r\n            <Form.Label>Название</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              value={name}\r\n              onChange={(e) => setName(e.target.value)}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group>\r\n            <Form.Label>Текст</Form.Label>\r\n            <Form.Control\r\n              as=\"textarea\"\r\n              rows={3}\r\n              value={text}\r\n              onChange={(e) => setText(e.target.value)}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group>\r\n            <Form.Label>Дата</Form.Label>\r\n            <Form.Control\r\n              type=\"date\"\r\n              value={date}\r\n              onChange={(e) => setDate(e.target.value)}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group>\r\n            <Form.Label>Изображение</Form.Label>\r\n            <Form.Control\r\n              type=\"file\"\r\n              onChange={handleImageChange}\r\n            />\r\n          </Form.Group>\r\n        </Form>\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={onHide}>\r\n          Закрыть\r\n        </Button>\r\n        <Button variant=\"primary\" onClick={handleSubmit}>\r\n          Сохранить\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default EditNewsModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}