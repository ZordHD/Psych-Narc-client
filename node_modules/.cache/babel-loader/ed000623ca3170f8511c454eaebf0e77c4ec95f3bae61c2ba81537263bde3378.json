{"ast":null,"code":"import React,{useEffect,useContext,useState}from'react';import{Container,Row,Col,Card,Button,Pagination,Modal}from'react-bootstrap';import{fetchServices}from'../http/servicesAPI';import{Context}from'../index';import{observer}from'mobx-react-lite';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PopularServices=observer(()=>{const{services}=useContext(Context);const[selectedService,setSelectedService]=useState(null);const[showModal,setShowModal]=useState(false);const pages=[];useEffect(()=>{fetchServices(services.page,services.limit).then(data=>{services.setServ(data.rows);services.setTotalCount(data.count);});},[services.page,services.limit]);const totalPages=Math.ceil(services.totalCount/services.limit);for(let i=0;i<totalPages;i++){pages.push(i+1);}const handlePageChange=pageNumber=>{services.setPage(pageNumber);};const handleServiceClick=services=>{setSelectedService(services);setShowModal(true);};const handleCloseModal=()=>{setShowModal(false);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Container,{className:\"block-Standart\",children:[/*#__PURE__*/_jsx(Pagination,{className:\"mt-5\",style:{marginRight:'20px'},children:/*#__PURE__*/_jsx(Pagination.Prev,{disabled:services.page===1,onClick:()=>handlePageChange(services.page-1)})}),/*#__PURE__*/_jsx(Row,{xs:1,md:1,className:\"mt-5\",style:{width:'100vw'},children:services.serv.map((servicesItem,index)=>/*#__PURE__*/_jsx(Col,{className:\"col-lg-4 g-5\",children:/*#__PURE__*/_jsxs(Card,{className:\"card-Popular-Services\",style:{border:'none'},children:[/*#__PURE__*/_jsx(Card.Img,{variant:\"top\",className:\"card-img-popServ-top\",src:process.env.REACT_APP_API_URL+servicesItem.image,style:{marginBottom:'-10px'}}),/*#__PURE__*/_jsxs(Card.Body,{style:{display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(Card.Title,{className:\"caption mb-3 mt-3\",style:{textAlign:'center',marginBottom:'4px'},children:servicesItem.name}),/*#__PURE__*/_jsx(\"div\",{className:\"div-Card-2\",style:{display:'flex',justifyContent:'center'}}),/*#__PURE__*/_jsx(Card.Text,{className:\"body-Regular mt-3\",style:{color:'white'},children:servicesItem.text}),/*#__PURE__*/_jsx(Button,{className:\"button-2 ms-auto\",style:{border:'none',display:'flex',marginTop:'auto'},onClick:()=>handleServiceClick(servicesItem),children:\"\\u041F\\u043E\\u0434\\u0440\\u043E\\u0431\\u043D\\u0435\\u0435\"})]})]})},index))}),/*#__PURE__*/_jsx(Pagination,{className:\"mt-5\",style:{marginLeft:'20px'},children:/*#__PURE__*/_jsx(Pagination.Next,{disabled:services.page===totalPages,onClick:()=>handlePageChange(services.page+1)})})]}),/*#__PURE__*/_jsxs(Pagination,{className:\"mt-5 block-Standart\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"block-Standart\",style:{marginLeft:'120px'},children:pages.map(page=>/*#__PURE__*/_jsx(Pagination.Item,{active:services.page===page,onClick:()=>services.setPage(page),children:page},page))}),/*#__PURE__*/_jsx(\"div\",{className:\"div-more-services\",children:/*#__PURE__*/_jsx(Button,{className:\"button-3\",style:{border:'none'},children:\"\\u0411\\u043E\\u043B\\u044C\\u0448\\u0435 \\u0443\\u0441\\u043B\\u0443\\u0433\"})})]}),/*#__PURE__*/_jsxs(Modal,{show:showModal,onHide:handleCloseModal,children:[/*#__PURE__*/_jsx(\"img\",{src:process.env.REACT_APP_API_URL+(selectedService===null||selectedService===void 0?void 0:selectedService.image),alt:\"\\u0423\\u0441\\u043B\\u0443\\u0433\\u0430\",style:{objectFit:'cover'}}),/*#__PURE__*/_jsx(Modal.Header,{children:/*#__PURE__*/_jsx(Modal.Title,{className:\"title-Text-2\",children:selectedService===null||selectedService===void 0?void 0:selectedService.name})}),/*#__PURE__*/_jsx(Modal.Body,{className:\"body-Regular\",style:{color:'rgb(61, 147, 120)'},children:/*#__PURE__*/_jsx(\"p\",{children:selectedService===null||selectedService===void 0?void 0:selectedService.fulltext})}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{className:\"button-3\",onClick:handleCloseModal,style:{border:'none'},children:\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\"})})]})]});});export default PopularServices;","map":{"version":3,"names":["React","useEffect","useContext","useState","Container","Row","Col","Card","Button","Pagination","Modal","fetchServices","Context","observer","jsx","_jsx","jsxs","_jsxs","PopularServices","services","selectedService","setSelectedService","showModal","setShowModal","pages","page","limit","then","data","setServ","rows","setTotalCount","count","totalPages","Math","ceil","totalCount","i","push","handlePageChange","pageNumber","setPage","handleServiceClick","handleCloseModal","children","className","style","marginRight","Prev","disabled","onClick","xs","md","width","serv","map","servicesItem","index","border","Img","variant","src","process","env","REACT_APP_API_URL","image","marginBottom","Body","display","flexDirection","Title","textAlign","name","justifyContent","Text","color","text","marginTop","marginLeft","Next","Item","active","show","onHide","alt","objectFit","Header","fulltext","Footer"],"sources":["D:/Psych-narc/client/src/components/PopularServices.js"],"sourcesContent":["import React, { useEffect, useContext, useState } from 'react';\r\nimport { Container, Row, Col, Card, Button, Pagination, Modal } from 'react-bootstrap';\r\nimport { fetchServices } from '../http/servicesAPI';\r\nimport { Context } from '../index';\r\nimport { observer } from 'mobx-react-lite';\r\n\r\nconst PopularServices = observer(() => {\r\n  const { services } = useContext(Context)\r\n  const [selectedService, setSelectedService] = useState(null);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const pages = []\r\n\r\n  useEffect(() => {\r\n    fetchServices(services.page, services.limit).then(data => {\r\n      services.setServ(data.rows);\r\n      services.setTotalCount(data.count);\r\n    });\r\n  }, [services.page, services.limit]);\r\n\r\n  const totalPages = Math.ceil(services.totalCount / services.limit);\r\n\r\n  for (let i = 0; i < totalPages; i++) {\r\n    pages.push(i + 1)\r\n  }\r\n\r\n  const handlePageChange = (pageNumber) => {\r\n    services.setPage(pageNumber);\r\n  };\r\n\r\n  const handleServiceClick = (services) => {\r\n    setSelectedService(services);\r\n    setShowModal(true);\r\n  };\r\n\r\n  const handleCloseModal = () => {\r\n    setShowModal(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Container className='block-Standart'>\r\n        <Pagination className='mt-5' style={{marginRight:'20px'}}>\r\n          <Pagination.Prev  \r\n            disabled={services.page === 1} \r\n            onClick={() => handlePageChange(services.page - 1)} />\r\n          </Pagination>\r\n        <Row xs={1} md={1} className=\"mt-5\" style={{width:'100vw'}}>\r\n          {services.serv.map((servicesItem, index) => (\r\n             <Col key={index} className='col-lg-4 g-5'>\r\n             <Card className='card-Popular-Services' style={{border:'none'}}>\r\n               <Card.Img \r\n                variant=\"top\" \r\n                className='card-img-popServ-top' \r\n                src={process.env.REACT_APP_API_URL + servicesItem.image} \r\n                style={{marginBottom:'-10px'}}\r\n                />\r\n               <Card.Body style={{display:'flex', flexDirection:'column'}} >\r\n                  <Card.Title \r\n                    className='caption mb-3 mt-3' \r\n                    style={{textAlign:'center', marginBottom:'4px'}}>\r\n                     {servicesItem.name}\r\n                  </Card.Title>\r\n                     <div className='div-Card-2' style={{display:'flex', justifyContent: 'center'}}/>\r\n                  <Card.Text \r\n                    className='body-Regular mt-3' \r\n                    style={{color:'white'}}>\r\n                     {servicesItem.text}                   \r\n                  </Card.Text>\r\n                     <Button \r\n                      className='button-2 ms-auto' \r\n                      style={{border:'none', display:'flex', marginTop:'auto'}}\r\n                      onClick={() => handleServiceClick(servicesItem)}>\r\n                         Подробнее\r\n                     </Button>\r\n               </Card.Body>\r\n             </Card>\r\n           </Col>\r\n          ))}\r\n        </Row>\r\n        <Pagination className='mt-5' style={{marginLeft:'20px'}}>\r\n         <Pagination.Next \r\n            disabled={services.page === totalPages} \r\n            onClick={() => handlePageChange(services.page + 1)} />\r\n        </Pagination>\r\n      </Container>\r\n      <Pagination className='mt-5 block-Standart'>\r\n        <div className='block-Standart' style={{marginLeft:'120px'}}>\r\n            {pages.map(page =>\r\n                <Pagination.Item\r\n                    key={page}\r\n                    active={services.page === page}\r\n                    onClick={() => services.setPage(page)}\r\n                    \r\n                >\r\n                  {page}\r\n                </Pagination.Item>\r\n            )}\r\n            </div>\r\n        <div className='div-more-services'>\r\n          <Button className='button-3' style={{ border: 'none' }}>\r\n            Больше услуг\r\n          </Button>\r\n        </div>\r\n      </Pagination>\r\n      <Modal show={showModal} onHide={handleCloseModal}> \r\n        <img \r\n          src={process.env.REACT_APP_API_URL + selectedService?.image}\r\n          alt='Услуга'\r\n          style={{objectFit:'cover'}}/>\r\n        <Modal.Header>\r\n          <Modal.Title className='title-Text-2'>{selectedService?.name}</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className='body-Regular' style={{color:'rgb(61, 147, 120)'}}>\r\n          <p>{selectedService?.fulltext}</p>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button className='button-3' onClick={handleCloseModal} style={{border:'none'}}>\r\n            Закрыть\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default PopularServices;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}